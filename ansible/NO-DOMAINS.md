# üöÄ FastAPI Xray VPN Service - –†–∞–±–æ—Ç–∞ –±–µ–∑ –¥–æ–º–µ–Ω–æ–≤

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ IP –∞–¥—Ä–µ—Å–∞–º

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ –¥–æ–º–µ–Ω–æ–≤. –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –ø–æ IP –∞–¥—Ä–µ—Å–∞–º.

## üõ† –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ansible
```bash
cd fastapi_xray/ansible
./scripts/install.sh
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
./scripts/manage-servers.sh -a check
```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
```bash
./scripts/manage-servers.sh -a deploy
```

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:

| –°—Ç—Ä–∞–Ω–∞ | IP –∞–¥—Ä–µ—Å | FastAPI | Xray VPN | Squid Proxy |
|--------|----------|---------|----------|-------------|
| üá¶üá™ –û–ê–≠ | 176.97.67.100 | http://176.97.67.100:8081 | 176.97.67.100:443 | 176.97.67.100:8888 |
| üáßüá∑ –ë—Ä–∞–∑–∏–ª–∏—è | 38.180.220.125 | http://38.180.220.125:8081 | 38.180.220.125:443 | 38.180.220.125:8888 |
| üá©üá™ –ì–µ—Ä–º–∞–Ω–∏—è | 37.1.199.23 | http://37.1.199.23:8081 | 37.1.199.23:443 | 37.1.199.23:8888 |
| üáØüáµ –Ø–ø–æ–Ω–∏—è | 176.97.71.56 | http://176.97.71.56:8081 | 176.97.71.56:443 | 176.97.71.56:8888 |
| üáπüá∑ –¢—É—Ä—Ü–∏—è | 5.180.45.191 | http://5.180.45.191:8081 | 5.180.45.191:443 | 5.180.45.191:8888 |
| üá™üá∏ –ò—Å–ø–∞–Ω–∏—è | 45.12.150.217 | http://45.12.150.217:8081 | 45.12.150.217:443 | 45.12.150.217:8888 |
| üá¶üá∫ –ê–≤—Å—Ç—Ä–∞–ª–∏—è | 45.15.185.58 | http://45.15.185.58:8081 | 45.15.185.58:443 | 45.15.185.58:8888 |
| üá∫üá∏ –°–®–ê | 94.131.101.213 | http://94.131.101.213:8081 | 94.131.101.213:443 | 94.131.101.213:8888 |

## üîß –ß—Ç–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è

1. **Docker & Docker Compose** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
2. **Nginx** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä (—Ç–æ–ª—å–∫–æ HTTP, –ø–æ—Ä—Ç 80)
3. **Xray** - VPN —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 443, Reality –ø—Ä–æ—Ç–æ–∫–æ–ª)
4. **FastAPI** - API —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8081)
5. **Squid** - HTTP –ø—Ä–æ–∫—Å–∏ (–ø–æ—Ä—Ç 8888)
6. **UFW Firewall** - –ó–∞—â–∏—Ç–∞
7. **Fail2ban** - –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **SSL –æ—Ç–∫–ª—é—á–µ–Ω** - —Ç–∞–∫ –∫–∞–∫ –±–µ–∑ –¥–æ–º–µ–Ω–æ–≤ –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ–ª—å–∑—è
- **–¢–æ–ª—å–∫–æ HTTP** - Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ HTTP (–ø–æ—Ä—Ç 80)
- **Xray Reality** - VPN —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ Reality –ø—Ä–æ—Ç–æ–∫–æ–ª—É, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç SSL
- **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –ø–æ IP

## üöÄ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã
./scripts/manage-servers.sh -a check

# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
./scripts/manage-servers.sh -a deploy

# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
./scripts/manage-servers.sh -a deploy -l uae-server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
./scripts/manage-servers.sh -a status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
./scripts/manage-servers.sh -a logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./scripts/manage-servers.sh -a restart
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **FastAPI API**:
   ```bash
   curl http://176.97.67.100:8081/health
   ```

2. **Xray VPN**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Reality –ø—Ä–æ—Ç–æ–∫–æ–ª
   - –°–µ—Ä–≤–µ—Ä: IP –∞–¥—Ä–µ—Å
   - –ü–æ—Ä—Ç: 443
   - UUID: 960f001f-d065-410e-8a0d-c8aa2af4fe42

3. **Squid Proxy**:
   ```bash
   curl --proxy http://176.97.67.100:8888 http://httpbin.org/ip
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `./scripts/manage-servers.sh -a logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./scripts/manage-servers.sh -a status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `./scripts/manage-servers.sh -a check`

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å VPN —Å–µ—Ä–≤–µ—Ä—ã –≤ 8 —Å—Ç—Ä–∞–Ω–∞—Ö, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ IP –∞–¥—Ä–µ—Å–∞–º.
